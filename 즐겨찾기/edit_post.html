<!--&lt;!&ndash; templates/edit_post.html &ndash;&gt;-->
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Edit Post</title>-->
<!--</head>-->
<!--<body>-->
<!--    <h1>Edit Post</h1>-->
<!--    <form method="POST">-->
<!--        <label for="title">Title:</label>-->
<!--        <input type="text" id="title" name="title" value="{{ post['title'] }}">-->
<!--        <br>-->
<!--        <label for="location">Location:</label>-->
<!--        <input type="text" id="location" name="location" value="{{ post['location'] }}">-->
<!--        <br>-->
<!--        <label for="place">Place:</label>-->
<!--        <input type="text" id="place" name="place" value="{{ post['place'] }}">-->
<!--        <br>-->
<!--        <label for="main_dish">Main Dish:</label>-->
<!--        <input type="text" id="main_dish" name="main_dish" value="{{ post['main_dish'] }}">-->
<!--        <br>-->
<!--        <button type="submit">Update</button>-->
<!--    </form>-->
<!--</body>-->
<!--</html>-->

<!--다됨-->
<!--<!DOCTYPE html>-->
<!--<html lang="ko">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>글 수정</title>-->
<!--    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">-->
<!--</head>-->
<!--<body>-->
<!--    <h1>글 수정</h1>-->
<!--    <form method="POST" onsubmit="submitForm(event)">-->
<!--        <label for="title">제목:</label>-->
<!--        <input type="text" id="title" name="title" value="{{ post.title }}" required><br>-->
<!--        <label for="location">위치:</label>-->
<!--        <input type="text" id="location" name="location" value="{{ post.location }}" required><br>-->
<!--        <label for="place">장소:</label>-->
<!--        <input type="text" id="place" name="place" value="{{ post.place }}" required><br>-->
<!--        <label for="main_dish">메인 요리:</label>-->
<!--        <input type="text" id="main_dish" name="main_dish" value="{{ post.main_dish }}" required><br>-->
<!--        <button type="submit">수정 완료</button>-->
<!--    </form>-->

<!--    <script>-->
<!--        function submitForm(event) {-->
<!--            event.preventDefault();-->
<!--            const postId = {{ post.post_id }};-->
<!--            const title = document.getElementById('title').value;-->
<!--            const location = document.getElementById('location').value;-->
<!--            const place = document.getElementById('place').value;-->
<!--            const mainDish = document.getElementById('main_dish').value;-->

<!--            fetch(`/edit_post/${postId}`, {-->
<!--                method: 'POST',-->
<!--                headers: {-->
<!--                    'Content-Type': 'application/json'-->
<!--                },-->
<!--                body: JSON.stringify({ title, location, place, main_dish: mainDish })-->
<!--            })-->
<!--            .then(response => response.json())-->
<!--            .then(data => {-->
<!--                if (data.success) {-->
<!--                    window.location.href = '/';-->
<!--                } else {-->
<!--                    alert('글 수정에 실패했습니다.');-->
<!--                }-->
<!--            });-->
<!--        }-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시글 수정</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>게시글 수정</h1>
    <form id="edit-post-form">
        <label for="title">제목:</label>
        <input type="text" id="title" name="title" value="{{ post.title }}" required><br>

        <label for="location">위치:</label>
        <input type="text" id="location" name="location" value="{{ post.location }}" required><br>

        <label for="place">장소:</label>
        <input type="text" id="place" name="place" value="{{ post.place }}" required><br>

        <label for="main_dish">주요 음식:</label>
        <input type="text" id="main_dish" name="main_dish" value="{{ post.main_dish }}" required><br>

        <label for="content">내용:</label>
        <textarea id="content" name="content" required>{{ post.content }}</textarea><br>

        <button type="submit">수정 완료</button>
    </form>

    <script>
        document.getElementById("edit-post-form").addEventListener("submit", function(event) {
            event.preventDefault();

            const postId = {{ post.post_id }};
            const title = document.getElementById("title").value;
            const location = document.getElementById("location").value;
            const place = document.getElementById("place").value;
            const main_dish = document.getElementById("main_dish").value;
            const content = document.getElementById("content").value;

            fetch(`/edit_post/${postId}`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ title, location, place, main_dish, content })
            }).then(response => response.json())
              .then(data => {
                  if (data.success) {
                      alert("글이 성공적으로 수정되었습니다.");
                      window.location.href = "/";
                  } else {
                      alert("글 수정에 실패했습니다.");
                  }
              });
        });
    </script>
</body>
</html>
